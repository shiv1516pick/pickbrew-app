<!doctype html>
<html lang="en">

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>PickBrew App</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined" />
    <link rel="stylesheet" href="style.css" />
</head>

<body class="bg-black text-white">
    <!-- Splash Screen (shown once per session) -->
    <div id="splash" class="splash lg:hidden" style="display:none;">
        <img src="images/logo.png" class="splash-logo" alt="PickBrew" />
        <div class="splash-brand">PickBrew</div>
        <p class="splash-powered">Powered by <span>PickBrew SQ</span></p>
        <div class="splash-bar"></div>
    </div>
    <script>if(!sessionStorage.getItem("pb_splash")){document.getElementById("splash").style.display="";}</script>

    <div class="lg:hidden max-w-md mx-auto h-screen bg-black flex flex-col overflow-hidden">
        <div class="relative shrink-0 h-56 bg-cover bg-center"
            style="background-image: url('https://images.unsplash.com/photo-1509042239860-f550ce710b93')">
            <div class="absolute inset-0 bg-black/40"></div>
            <div class="absolute top-5 left-5 right-5 flex justify-between items-center">
                <div class="flex items-center gap-2">
                    <img src="images/logo.png" class="h-9 rounded bg-white" />
                </div>
                <div class="flex items-center gap-2">
                    <div class="bg-white/20 backdrop-blur px-2.5 py-1 rounded-full text-xs flex items-center gap-1">
                        <span class="material-symbols-outlined text-[14px]">location_on</span>
                        Marshfield
                    </div>
                    <span class="material-symbols-outlined text-[22px] cursor-pointer">search</span>
                </div>
            </div>
            <div class="absolute bottom-10 left-5 right-5">
                <p id="greeting" class="text-sm opacity-80 mb-1">Good morning</p>
                <h1 class="text-xl font-semibold leading-snug">What would you like<br />to order today?</h1>
            </div>
        </div>

        <div class="bg-[#121212] rounded-t-[2.5rem] -mt-8 flex-1 overflow-y-auto relative z-10">
            <div class="px-6 pt-6 pb-6">
                <div class="flex justify-between text-sm mb-6 opacity-80">
                    <a class="underline underline-offset-4" href="index.html">Menu</a>
                    <a href="favorites.html">Favorites</a>
                    <a href="previous.html">Previous</a>
                    <a href="cart.html">Cart</a>
                </div>
                <h3 class="text-sm font-semibold text-gray-400 uppercase tracking-wider mb-4">Categories</h3>
                <div id="home-categories"></div>
                <h3 class="text-sm font-semibold text-gray-400 uppercase tracking-wider mb-4">Popular Now</h3>
                <div id="home-popular" class="flex gap-3 overflow-x-auto pb-2"></div>

            </div>
        </div>

        <div class="shrink-0 bg-black border-t border-gray-800 flex justify-around py-3">
            <a href="index.html" class="nav-item">
                <span class="material-symbols-outlined">local_cafe</span>
            </a>
            <a href="menu.html" class="nav-item">
                <span class="material-symbols-outlined">menu_book_2</span>
            </a>
            <a href="favorites.html" class="nav-item">
                <span class="material-symbols-outlined">favorite</span>
            </a>
            <a href="cart.html" class="nav-item relative">
                <span class="material-symbols-outlined">shopping_cart</span>
                <span style="display:none"
                    class="cart-badge absolute -top-1 -right-2 bg-[#441a0e] border text-xs rounded-full px-1.5 py-.75 text-white"></span>
            </a>
            <a href="profile.html" class="nav-item">
                <span class="material-symbols-outlined">account_circle</span>
            </a>
        </div>
    </div>
    <div class="hidden lg:flex min-h-screen items-center justify-center bg-black text-white">
        <p class="opacity-70">Mobile & Tablet only</p>
    </div>
    <script src="app.js"></script>
    <script src="index.js"></script>
    <script>
        (function () {
            var splash = document.getElementById("splash");
            if (!splash || splash.style.display === "none") return;
            sessionStorage.setItem("pb_splash", "1");
            setTimeout(function () {
                splash.classList.add("fade-out");
                splash.addEventListener("transitionend", function () {
                    splash.remove();
                });
            }, 2500);
        })();
        document.addEventListener("DOMContentLoaded", function () {
            // Dynamic greeting
            var hour = new Date().getHours();
            document.getElementById("greeting").textContent = hour < 12 ? "Good morning" : hour < 17 ? "Good afternoon" : "Good evening";

            // Render all 14 categories
            var catContainer = document.getElementById("home-categories");
            var html = "";
            PickBrew.CATEGORIES.forEach(function (cat, i) {
                var products = PickBrew.getProductsByCategory(cat.id);
                var img = products.length > 0 ? products[0].image : "";
                html += '<a href="menu.html#' + cat.id + '" class="flex items-center gap-5 mb-5">';
                html += '<img src="' + img + '" class="w-20 h-20 rounded-full object-cover" />';
                html += '<div class="flex-1">';
                html += '<h2 class="text-lg font-semibold">' + cat.name + '</h2>';
                html += '<p class="text-sm text-gray-400">' + (cat.desc || "") + '</p>';
                html += '</div>';
                html += '<span class="material-symbols-outlined text-gray-500">chevron_right</span>';
                html += '</a>';
                if (i < PickBrew.CATEGORIES.length - 1) html += '<hr class="border-gray-700 mb-5" />';
            });
            catContainer.innerHTML = html;

            // Render popular items
            var popularIds = ["caramel-latte", "iced-mocha", "vanilla-cold-brew", "hot-chai-latte"];
            var popContainer = document.getElementById("home-popular");
            var popHtml = "";
            popularIds.forEach(function (id) {
                var p = PickBrew.getProduct(id);
                if (!p) return;
                popHtml += '<a href="product.html?id=' + p.id + '" class="shrink-0 w-32">';
                popHtml += '<img src="' + p.image + '" class="w-32 h-32 rounded-2xl object-cover mb-2" />';
                popHtml += '<h4 class="text-sm font-semibold truncate">' + p.name + '</h4>';
                popHtml += '<p class="text-xs text-[#c8a27a]">$' + p.price.toFixed(2) + '</p>';
                popHtml += '</a>';
            });
            popContainer.innerHTML = popHtml;
        });
    </script>
</body>

</html>