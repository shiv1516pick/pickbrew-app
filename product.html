<!doctype html>
<html lang="en">

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>PickBrew App</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined" />
    <link rel="stylesheet" href="style.css" />
</head>

<body class="bg-black text-white">
    <div class="lg:hidden max-w-md mx-auto h-screen bg-black flex flex-col overflow-hidden">

        <!-- Hero image -->
        <div class="relative shrink-0">
            <img id="hero-img" src="https://images.unsplash.com/photo-1511920170033-f8396924c348"
                class="w-full h-56 object-cover" />
            <a href="menu.html"
                class="absolute top-4 left-4 w-9 h-9 bg-black/50 rounded-full flex items-center justify-center">
                <span class="material-symbols-outlined text-white text-[20px]">arrow_back</span>
            </a>
            <button id="fav-btn"
                class="absolute top-4 right-4 w-9 h-9 bg-black/50 rounded-full flex items-center justify-center">
                <span id="fav-icon" class="material-symbols-outlined text-white text-[20px]">favorite_border</span>
            </button>
        </div>

        <!-- Scrollable content -->
        <div class="bg-[#121212] rounded-t-[2.5rem] -mt-8 flex-1 overflow-y-auto relative z-10">
            <div class="px-6 pt-6 pb-6">

                <!-- Name & Price -->
                <div class="flex justify-between items-start mb-1">
                    <h1 id="product-name" class="text-xl font-semibold">Brewed Coffee</h1>
                    <span id="base-price-display" class="text-xl font-semibold">$4.29</span>
                </div>
                <p id="product-desc" class="text-sm text-gray-400 mb-6">Fresh brewed house blend coffee</p>

                <!-- Size -->
                <div class="mb-5">
                    <h3 class="text-sm font-semibold text-gray-300 mb-3">Size</h3>
                    <div class="flex gap-3 option-group" data-option="size">
                        <button data-value="Regular" data-extra="0"
                            class="opt-btn flex-1 py-2 rounded-full text-sm font-medium bg-[#af7b5c] text-black">Regular</button>
                        <button data-value="Large" data-extra="0.80"
                            class="opt-btn flex-1 py-2 rounded-full text-sm font-medium border border-gray-600 text-gray-300">Large
                            (+$0.80)</button>
                    </div>
                </div>

                <!-- Strength -->
                <div class="mb-5">
                    <h3 class="text-sm font-semibold text-gray-300 mb-3">Strength</h3>
                    <div class="flex gap-3 option-group" data-option="strength">
                        <button data-value="Regular" data-extra="0"
                            class="opt-btn flex-1 py-2 rounded-full text-sm font-medium bg-[#af7b5c] text-black">Regular</button>
                        <button data-value="Extra Strong" data-extra="0"
                            class="opt-btn flex-1 py-2 rounded-full text-sm font-medium border border-gray-600 text-gray-300">Extra
                            Strong</button>
                    </div>
                </div>

                <!-- Flavor -->
                <div class="mb-5">
                    <h3 class="text-sm font-semibold text-gray-300 mb-3">Flavor</h3>
                    <div class="flex gap-2 flex-wrap option-group" data-option="flavor">
                        <button data-value="None" data-extra="0"
                            class="opt-btn px-4 py-2 rounded-full text-sm font-medium bg-[#af7b5c] text-black">None</button>
                        <button data-value="Vanilla" data-extra="0.60"
                            class="opt-btn px-4 py-2 rounded-full text-sm font-medium border border-gray-600 text-gray-300">Vanilla</button>
                        <button data-value="Caramel" data-extra="0.60"
                            class="opt-btn px-4 py-2 rounded-full text-sm font-medium border border-gray-600 text-gray-300">Caramel</button>
                        <button data-value="Hazelnut" data-extra="0.60"
                            class="opt-btn px-4 py-2 rounded-full text-sm font-medium border border-gray-600 text-gray-300">Hazelnut</button>
                        <button data-value="Mocha" data-extra="0.60"
                            class="opt-btn px-4 py-2 rounded-full text-sm font-medium border border-gray-600 text-gray-300">Mocha</button>
                    </div>
                </div>

                <!-- Add-ons -->
                <div class="mb-5">
                    <h3 class="text-sm font-semibold text-gray-300 mb-3">Add-ons</h3>
                    <div class="space-y-3">
                        <label class="flex items-center justify-between">
                            <span class="text-sm text-gray-300">Whipped Cream</span>
                            <div class="flex items-center gap-2">
                                <span class="text-xs text-gray-400">+$0.60</span>
                                <input type="checkbox" data-addon="Whipped Cream" data-extra="0.60"
                                    class="addon-chk w-5 h-5 rounded accent-[#af7b5c]" />
                            </div>
                        </label>
                        <label class="flex items-center justify-between">
                            <span class="text-sm text-gray-300">Extra Shot</span>
                            <div class="flex items-center gap-2">
                                <span class="text-xs text-gray-400">+$0.80</span>
                                <input type="checkbox" data-addon="Extra Shot" data-extra="0.80"
                                    class="addon-chk w-5 h-5 rounded accent-[#af7b5c]" />
                            </div>
                        </label>
                        <label class="flex items-center justify-between">
                            <span class="text-sm text-gray-300">Oat Milk</span>
                            <div class="flex items-center gap-2">
                                <span class="text-xs text-gray-400">+$0.70</span>
                                <input type="checkbox" data-addon="Oat Milk" data-extra="0.70"
                                    class="addon-chk w-5 h-5 rounded accent-[#af7b5c]" />
                            </div>
                        </label>
                        <label class="flex items-center justify-between">
                            <span class="text-sm text-gray-300">Caramel Drizzle</span>
                            <div class="flex items-center gap-2">
                                <span class="text-xs text-gray-400">+$0.50</span>
                                <input type="checkbox" data-addon="Caramel Drizzle" data-extra="0.50"
                                    class="addon-chk w-5 h-5 rounded accent-[#af7b5c]" />
                            </div>
                        </label>
                    </div>
                </div>

                <!-- Note -->
                <div class="mb-4">
                    <h3 class="text-sm font-semibold text-gray-300 mb-3">Special Instructions</h3>
                    <textarea id="note-input" rows="2" placeholder="e.g. Extra hot, no sugar..."
                        class="w-full bg-[#1e1e1e] border border-gray-700 rounded-xl px-4 py-3 text-sm text-white placeholder-gray-500 focus:outline-none focus:border-[#af7b5c]"></textarea>
                </div>

            </div>
        </div>

        <!-- Fixed bottom bar -->
        <div class="shrink-0 bg-[#121212] border-t border-gray-800 px-6 py-4">
            <div class="flex items-center justify-between mb-4">
                <div class="flex items-center gap-4">
                    <button id="qty-minus"
                        class="w-8 h-8 rounded-full bg-[#af7b5c] text-black flex items-center justify-center text-lg font-bold">−</button>
                    <span id="qty-display" class="text-lg font-semibold">1</span>
                    <button id="qty-plus"
                        class="w-8 h-8 rounded-full bg-[#af7b5c] text-black flex items-center justify-center text-lg font-bold">+</button>
                </div>
                <span id="total-price" class="text-lg font-semibold">$4.29</span>
            </div>
            <button id="add-to-cart-btn"
                class="w-full py-3 bg-[#af7b5c] text-black text-center rounded-full font-semibold text-base">
                Add to Cart
            </button>
        </div>

    </div>
    <div class="hidden lg:flex min-h-screen items-center justify-center bg-black text-white">
        <p class="opacity-70">Mobile & Tablet only</p>
    </div>
    <script src="app.js"></script>
    <script src="index.js"></script>
    <script>
        document.addEventListener("DOMContentLoaded", function () {
            // Product data
            var products = {
                "brewed-coffee": { name: "Brewed Coffee", price: 4.29, image: "https://images.unsplash.com/photo-1511920170033-f8396924c348", desc: "Fresh brewed house blend coffee" },
                "vanilla-cold-brew": { name: "Vanilla Cold Brew", price: 4.79, image: "https://images.unsplash.com/photo-1461023058943-07fcbe16d735", desc: "Slow-steeped cold brew with vanilla" },
                "espresso-shot": { name: "Espresso Shot", price: 3.29, image: "https://images.unsplash.com/photo-1521305916504-4a1121188589", desc: "Single or double shot" },
                "americano": { name: "Americano", price: 3.99, image: "https://images.unsplash.com/photo-1514432324607-a09d9b4aefda", desc: "Espresso with hot water" },
                "caramel-latte": { name: "Caramel Latte", price: 5.49, image: "https://images.unsplash.com/photo-1509042239860-f550ce710b93", desc: "Espresso with steamed milk & caramel" },
                "cappuccino": { name: "Cappuccino", price: 5.19, image: "https://images.unsplash.com/photo-1521305916504-4a1121188589", desc: "Double shot with foamed milk" },
                "iced-mocha": { name: "Iced Mocha", price: 5.99, image: "https://images.unsplash.com/photo-1572442388796-11668a67e53d", desc: "Chilled espresso with chocolate & milk" },
                "bagel-cream-cheese": { name: "Bagel & Cream Cheese", price: 3.60, image: "https://images.unsplash.com/photo-1504754524776-8f4f37790ca0", desc: "Toasted bagel with cream cheese" },
                "butter-croissant": { name: "Butter Croissant", price: 3.25, image: "https://images.unsplash.com/photo-1555507036-ab1f4038024a", desc: "Freshly baked flaky croissant" }
            };

            // Get product id from URL
            var params = new URLSearchParams(window.location.search);
            var pid = params.get("id") || "brewed-coffee";
            var product = products[pid] || products["brewed-coffee"];

            // Set product info
            document.getElementById("hero-img").src = product.image;
            document.getElementById("product-name").textContent = product.name;
            document.getElementById("product-desc").textContent = product.desc;
            document.getElementById("base-price-display").textContent = "$" + product.price.toFixed(2);
            document.title = product.name + " — PickBrew";

            // State
            var state = { size: "Regular", strength: "Regular", flavor: "None", addons: [], qty: 1 };
            var basePrice = product.price;
            var ACTIVE = "opt-btn flex-1 py-2 rounded-full text-sm font-medium bg-[#af7b5c] text-black";
            var INACTIVE = "opt-btn flex-1 py-2 rounded-full text-sm font-medium border border-gray-600 text-gray-300";
            var ACTIVE_PILL = "opt-btn px-4 py-2 rounded-full text-sm font-medium bg-[#af7b5c] text-black";
            var INACTIVE_PILL = "opt-btn px-4 py-2 rounded-full text-sm font-medium border border-gray-600 text-gray-300";

            function calcPrice() {
                var extra = 0;
                document.querySelectorAll(".option-group").forEach(function (g) {
                    var active = g.querySelector(".opt-btn.bg-\\[\\#af7b5c\\]") || g.querySelector('[class*="bg-[#af7b5c]"]');
                    if (active) extra += parseFloat(active.dataset.extra || 0);
                });
                document.querySelectorAll(".addon-chk:checked").forEach(function (c) {
                    extra += parseFloat(c.dataset.extra || 0);
                });
                var unitPrice = basePrice + extra;
                var total = unitPrice * state.qty;
                document.getElementById("total-price").textContent = "$" + total.toFixed(2);
            }

            // Option group clicks
            document.querySelectorAll(".option-group").forEach(function (group) {
                group.querySelectorAll(".opt-btn").forEach(function (btn) {
                    btn.addEventListener("click", function () {
                        var isPill = !btn.classList.contains("flex-1");
                        group.querySelectorAll(".opt-btn").forEach(function (b) {
                            b.className = b.classList.contains("flex-1") ? INACTIVE : INACTIVE_PILL;
                        });
                        btn.className = isPill ? ACTIVE_PILL : ACTIVE;
                        state[group.dataset.option] = btn.dataset.value;
                        calcPrice();
                    });
                });
            });

            // Addon checkboxes
            document.querySelectorAll(".addon-chk").forEach(function (chk) {
                chk.addEventListener("change", calcPrice);
            });

            // Quantity
            document.getElementById("qty-minus").addEventListener("click", function () {
                if (state.qty > 1) { state.qty--; document.getElementById("qty-display").textContent = state.qty; calcPrice(); }
            });
            document.getElementById("qty-plus").addEventListener("click", function () {
                state.qty++; document.getElementById("qty-display").textContent = state.qty; calcPrice();
            });

            // Favorite
            var favIcon = document.getElementById("fav-icon");
            function updateFavIcon() {
                favIcon.textContent = PickBrew.isFavorite(pid) ? "favorite" : "favorite_border";
                favIcon.style.color = PickBrew.isFavorite(pid) ? "#ef4444" : "white";
            }
            updateFavIcon();
            document.getElementById("fav-btn").addEventListener("click", function () {
                PickBrew.toggleFavorite({ id: pid, name: product.name, price: product.price, image: product.image, desc: product.desc });
                updateFavIcon();
                PickBrew.showToast(PickBrew.isFavorite(pid) ? "Added to favorites" : "Removed from favorites");
            });

            // Add to cart
            document.getElementById("add-to-cart-btn").addEventListener("click", function () {
                var addons = [];
                document.querySelectorAll(".addon-chk:checked").forEach(function (c) { addons.push(c.dataset.addon); });
                var extra = 0;
                document.querySelectorAll(".option-group").forEach(function (g) {
                    var active = g.querySelector('[class*="bg-[#af7b5c]"]');
                    if (active) extra += parseFloat(active.dataset.extra || 0);
                });
                document.querySelectorAll(".addon-chk:checked").forEach(function (c) {
                    extra += parseFloat(c.dataset.extra || 0);
                });
                PickBrew.addToCart({
                    id: pid,
                    name: product.name,
                    price: basePrice + extra,
                    image: product.image,
                    desc: product.desc,
                    size: state.size,
                    strength: state.strength,
                    flavor: state.flavor,
                    addons: addons,
                    note: document.getElementById("note-input").value,
                    qty: state.qty
                });
                PickBrew.showToast("Added " + state.qty + "x " + product.name + " to cart");
                setTimeout(function () { window.location.href = "cart.html"; }, 800);
            });

            calcPrice();
        });
    </script>
</body>

</html>
