<!doctype html>
<html lang="en">

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>PickBrew App</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined" />
    <link rel="stylesheet" href="style.css" />
</head>

<body class="bg-black text-white">
    <div class="lg:hidden max-w-md mx-auto h-screen bg-black flex flex-col overflow-hidden">

        <div class="shrink-0 bg-[#5a7479] pt-5 pb-10">
            <h1 class="text-2xl font-semibold text-center">Favorites</h1>
        </div>

        <div id="fav-area" class="bg-[#121212] rounded-t-[2.5rem] -mt-6 flex-1 overflow-y-auto">
        </div>

        <div class="shrink-0 bg-black border-t border-gray-800 flex justify-around py-3">
            <a href="index.html" class="nav-item">
                <span class="material-symbols-outlined">local_cafe</span>
            </a>
            <a href="menu.html" class="nav-item">
                <span class="material-symbols-outlined">menu_book_2</span>
            </a>
            <a href="favorites.html" class="nav-item">
                <span class="material-symbols-outlined">favorite</span>
            </a>
            <a href="cart.html" class="nav-item relative">
                <span class="material-symbols-outlined">shopping_cart</span>
                <span class="cart-badge absolute -top-1 -right-2 bg-[#af7b5c] text-xs rounded-full px-1"></span>
            </a>
            <a href="profile.html" class="nav-item">
                <span class="material-symbols-outlined">account_circle</span>
            </a>
        </div>
    </div>
    <div class="hidden lg:flex min-h-screen items-center justify-center bg-black text-white">
        <p class="opacity-70">Mobile & Tablet only</p>
    </div>
    <script src="app.js"></script>
    <script src="index.js"></script>
    <script>
        document.addEventListener("DOMContentLoaded", function () {
            function renderFavs() {
                var favs = PickBrew.getFavorites();
                var area = document.getElementById("fav-area");

                if (favs.length === 0) {
                    area.innerHTML = '<div class="flex flex-col justify-center items-center h-full px-6">' +
                        '<span class="material-symbols-outlined text-[48px] text-gray-600 mb-3">favorite_border</span>' +
                        '<p class="text-[#c8a27a] text-sm text-center leading-relaxed">You don\'t have any favorite items yet</p>' +
                        '<a href="menu.html" class="inline-block mt-4 px-6 py-2 bg-[#af7b5c] text-black text-sm font-semibold rounded-full">Browse Menu</a>' +
                        '</div>';
                    return;
                }

                var html = '<div class="px-6 pt-8 pb-4">';
                favs.forEach(function (item) {
                    html += '<div class="mb-6">' +
                        '<div class="flex gap-4 items-center">' +
                        '<a href="product.html?id=' + item.id + '">' +
                        '<img src="' + item.image + '" class="w-14 h-14 rounded-full object-cover" />' +
                        '</a>' +
                        '<div class="flex-1">' +
                        '<a href="product.html?id=' + item.id + '">' +
                        '<h3 class="font-semibold">' + item.name + '</h3>' +
                        '<p class="text-sm text-gray-400">' + (item.desc || '') + '</p>' +
                        '</a>' +
                        '</div>' +
                        '<div class="flex gap-3 items-center">' +
                        '<span class="font-semibold text-sm">$' + item.price.toFixed(2) + '</span>' +
                        '<button class="add-fav-cart w-7 h-7 rounded-full bg-[#af7b5c] text-black flex items-center justify-center" data-id="' + item.id + '" data-name="' + item.name + '" data-price="' + item.price + '" data-image="' + item.image + '" data-desc="' + (item.desc || '') + '">' +
                        '<span class="material-symbols-outlined text-[18px]">add</span>' +
                        '</button>' +
                        '<button class="remove-fav text-red-400" data-id="' + item.id + '">' +
                        '<span class="material-symbols-outlined text-[20px]">close</span>' +
                        '</button>' +
                        '</div>' +
                        '</div>' +
                        '<hr class="border-gray-700 mt-4" />' +
                        '</div>';
                });
                html += '</div>';
                area.innerHTML = html;

                area.querySelectorAll(".remove-fav").forEach(function (btn) {
                    btn.addEventListener("click", function () {
                        PickBrew.removeFavorite(btn.dataset.id);
                        PickBrew.showToast("Removed from favorites");
                        renderFavs();
                    });
                });

                area.querySelectorAll(".add-fav-cart").forEach(function (btn) {
                    btn.addEventListener("click", function () {
                        PickBrew.addToCart({
                            id: btn.dataset.id,
                            name: btn.dataset.name,
                            price: parseFloat(btn.dataset.price),
                            image: btn.dataset.image,
                            desc: btn.dataset.desc,
                            size: "Regular", strength: "Regular", flavor: "None", addons: [], note: "", qty: 1
                        });
                        PickBrew.showToast(btn.dataset.name + " added to cart");
                    });
                });
            }

            renderFavs();
        });
    </script>
</body>

</html>
